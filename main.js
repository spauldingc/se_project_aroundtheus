!function(){var e={240:function(){api.getInitialCards().then((e=>{})).catch((e=>{console.error(e)})),Promise.all([api.getUserInfo(),api.getInitialCards()])}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";const e=".cards__list",t="#card-template",r="#card-image-modal",n="#card-add-modal",i=document.querySelector("#profile-edit-button"),o=document.querySelector("#profile-add-button"),a="#profile-edit-modal",l=(document.querySelectorAll(".modal"),document.querySelector(".profile__title")),c=document.querySelector(".profile__description"),d=document.querySelector("#profile-title-input"),u=document.querySelector("#profile-description-input"),_={formSelector:".modal__form",inputSelector:".modal__input",submitBtnSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class m{constructor(e,t){this._inputSelector=e.inputSelector,this._submitBtnSelector=e.submitBtnSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=document.querySelector(t),this._submitBtn=this._formEl.querySelector(this._submitBtnSelector)}_showInputError(e){this._errorMessageEl=this._formEl.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._formEl.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_toggleBtnState(){this._hasInvalidInput()?this._disableBtn():this._enableBtn()}_setEventListeners(){this._inputEls=Array.from(this._formEl.querySelectorAll(this._inputSelector)),this._toggleBtnState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleBtnState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleBtnState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class h{constructor(e,t,s){let{name:r,link:n}=e;this._name=r,this._link=n,this._cardSelector=t,this._cardElement=this._getTemplate(),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardLikeBtn=this._cardElement.querySelector(".card__like-button"),this._cardTrashBtn=this._cardElement.querySelector(".card__trash-button"),this._handleCardClick=s}_handleLikeIcon(){this._cardLikeBtn.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._cardLikeBtn.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardTrashBtn.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}generateCard(){return this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}}class p{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleClickClose=e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",this._handleClickClose)}}class E extends p{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEls=this._popupForm.querySelectorAll(".modal__input")}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{""!==t&&(e[t.name]=t.value)})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()}))}}var g=s(240),v=s.n(g);const f=new class{constructor(e,t){this._userName=e,this._userJob=t}getUserInfo(){return{profileName:this._userName.textContent,profileDescription:this._userJob.textContent}}setUserInfo(e,t){this._userName.textContent=e,this._userJob.textContent=t}}(l,c),k=new E(a,(function(e){f.setUserInfo(e.title,e.description),k.close()})),S=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._element=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>this._renderer(e)))}addItem(e){this._element.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{let{name:t,link:s}=e;const r=C({name:t,link:s});S.addItem(r)}},e);function C(e){let{name:s,link:r}=e;const n=new h({name:s,link:r},t,(e=>{let{name:t,link:s}=e;b.open({name:t,link:s})}));return n.generateCard()}S.renderItems();const b=new class extends p{constructor(e){super({popupSelector:e}),this._cardImageModalPreview=document.querySelector("#card-image-modal-preview"),this._cardImageModalTitle=document.querySelector("#card-image-modal-title")}open(e){let{name:t,link:s}=e;this._cardImageModalPreview.src=s,this._cardImageModalPreview.alt=t,this._cardImageModalTitle.textContent=t,super.open()}}(r),L=new E(n,(function(e){let{title:t,url:s}=e;const r={name:t,link:s};S.addItem(C(r)),L.close()}));L.setEventListeners(),k.setEventListeners(),b.setEventListeners();const y=new m(_,n),I=new m(_,a);y.enableValidation(),I.enableValidation(),i.addEventListener("click",(()=>{const{profileName:e,profileDescription:t}=f.getUserInfo();d.value=e,u.value=t,I.resetValidation(),k.open()})),o.addEventListener("click",(()=>{y.resetValidation(),L.open()})),new(v())({baseUrl:"https://around.nomoreparties.co/v1/group-42",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}})}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xCQyxRQUFTLDhDQUNUQyxRQUFTLENBQ1BDLGNBQWUsdUNBQ2YsZUFBZ0IscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9Db25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG50aGlzLl9vcHRpb25zID0gb3B0aW9uczsgXHJcbnRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG50aGlzLl9oZWFkZXJzID0gaGVhZGVyczsgfVxyXG4gIFxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJkNThlOTU3NC02OGIxLTRkNTItYWJhNC02NjU5NTA2MDQ2N2JcIlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxufSk7XHJcbiAgICAgICAgIFxyXG4gICAgICB9XHJcbiAgIGdldFVzZXJJbmZvKCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImQ1OGU5NTc0LTY4YjEtNGQ1Mi1hYmE0LTY2NTk1MDYwNDY3YlwiXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG59KTtcclxuICAgfVxyXG5cclxuICAgY2hhbmdlVXNlckluZm8oKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsXHJcbiAgICAge21ldGhvZDogUGF0Y2gsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImQ1OGU5NTc0LTY4YjEtNGQ1Mi1hYmE0LTY2NTk1MDYwNDY3YlwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBcIk1hcmllIFNrxYJvZG93c2thIEN1cmllXCIsXHJcbiAgICAgICAgYWJvdXQ6IFwiUGh5c2ljaXN0IGFuZCBDaGVtaXN0XCJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG59KTtcclxufVxyXG5cclxuXHJcbmFkZENhcmQoKXtcclxucmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gIG1ldGhvZDogUE9TVCxcclxuaGVhZGVyczoge1xyXG4gIGF1dGhvcml6YXRpb246IFwiZDU4ZTk1NzQtNjhiMS00ZDUyLWFiYTQtNjY1OTUwNjA0NjdiXCJcclxufVxyXG59KVxyXG4udGhlbihyZXMgPT4ge1xyXG4gIGlmIChyZXMub2spIHtcclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gIH1cclxufSk7XHJcbn1cclxuXHJcbmRlbGV0ZUNhcmQoKXtcclxuICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvY2FyZElkYCwge1xyXG4gICAgbWV0aG9kOiBEZWxldGUsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJkNThlOTU3NC02OGIxLTRkNTItYWJhNC02NjU5NTA2MDQ2N2JcIlxyXG4gIH1cclxuICB9KVxyXG4gIC50aGVuKHJlcyA9PiB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbiAgXHJcbiAgYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgLy8gcHJvY2VzcyB0aGUgcmVzdWx0XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgfSk7XHJcblxyXG4gIFByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZTsgfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKkVsZW1lbnRzKi9cclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IHtcclxuICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkTGlzdDogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBjYXJkSW1hZ2VNb2RhbDogXCIjY2FyZC1pbWFnZS1tb2RhbFwiLFxyXG4gIGNhcmRBZGRNb2RhbDogXCIjY2FyZC1hZGQtbW9kYWxcIixcclxuICBmb3JtOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbW9kYWxzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIildO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdEZvcm1Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ0blNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLypcclxuICBcclxuXHJcbiAgXHJcbiAgXHJcbiAgXHJcbiAgZXhwb3J0IGNvbnN0IHByb2ZpbGVDbG9zZUJ0biA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWNsb3NlLWJ1dHRvblwiKTtcclxuICBcclxuICBleHBvcnQgIGNvbnN0IGNhcmRBZGRDbG9zZUJ0biA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWNsb3NlLWJ1dHRvblwiKTtcclxuICBleHBvcnQgY29uc3QgY2FyZEltYWdlQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIjY2FyZC1pbWFnZS1tb2RhbC1jbG9zZS1idXR0b25cIlxyXG4gICk7XHJcbiAgXHJcblxyXG4qL1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnRuU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtRWwpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnRuU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnRuU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ0bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnRuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnRuU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ0blN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdG5TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRyYXNoQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlmIChpbnB1dEVsICE9PSBcIlwiKSB7XHJcbiAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gaW5kZXguanNcclxuLy9pbXBvcnQgY29uc3RhbnRzXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHNlbGVjdG9ycyxcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIHByb2ZpbGVFZGl0TW9kYWwsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZUFkZEJ0bixcclxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcclxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XHJcblxyXG4vL2ltcG9ydCBjb21wb25lbnQgY2xhc3Nlc1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbi8vaW1wb3J0IHN0eWxlc1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy9Qcm9maWxlIENsYXNzXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwcm9maWxlRWRpdE1vZGFsLFxyXG4gIGhhbmRsZUNhcmRFZGl0U3VibWl0XHJcbik7XHJcblxyXG4vL1NlY3Rpb24gQ2xhc3NcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgc2VsZWN0b3JzLmNhcmRMaXN0XHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy9DcmVhdGUgQ2FyZHMgb3IgQWRkIENhcmRzIHRocm91Z2ggU3VibWl0XHJcbmZ1bmN0aW9uIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICB7IG5hbWUsIGxpbmsgfSxcclxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUsXHJcbiAgICAoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICAgICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIC8vIGUucHJldmVudERlZmF1bHQoKTtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xyXG4gIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEFkZFN1Ym1pdCh7IHRpdGxlLCB1cmwgfSkge1xyXG4gIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGFkZENhcmREYXRhID0geyBuYW1lOiB0aXRsZSwgbGluazogdXJsIH07XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShhZGRDYXJkKGFkZENhcmREYXRhKSk7XHJcbiAgLy8gZS50YXJnZXQucmVzZXQoKTtcclxuICAvLyBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLmNhcmRJbWFnZU1vZGFsKTtcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgc2VsZWN0b3JzLmNhcmRBZGRNb2RhbCxcclxuICBoYW5kbGVDYXJkQWRkU3VibWl0XHJcbik7XHJcblxyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKiBGb3JtIFZhbGlkYXRpb24gKi9cclxuXHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcclxuICBzZWxlY3RvcnMuY2FyZEFkZE1vZGFsXHJcbik7XHJcbmNvbnN0IGVkaXRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgZGVmYXVsdEZvcm1Db25maWcsXHJcbiAgcHJvZmlsZUVkaXRNb2RhbFxyXG4pO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLyogRXZlbnQgSGFuZGxlcnMgKi9cclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb247XHJcbiAgZWRpdENhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy9BUElcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTQyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjNTZlMzBkYy0yODgzLTQyNzAtYTU5ZS1iMmY3YmFlOTY5YzZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgfVxyXG59KTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYikge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2IgPSB1c2VySm9iO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcm9maWxlTmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlTW9kYWxQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1pbWFnZS1tb2RhbC1wcmV2aWV3XCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VNb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1pbWFnZS1tb2RhbC10aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VNb2RhbFByZXZpZXcuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZU1vZGFsUHJldmlldy5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJhcGkiLCJnZXRJbml0aWFsQ2FyZHMiLCJ0aGVuIiwicmVzdWx0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJQcm9taXNlIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzZWxlY3RvcnMiLCJwcm9maWxlRWRpdEJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVBZGRCdG4iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZVRpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJkZWZhdWx0Rm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdG5TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsIiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ0blNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsIiwiX3N1Ym1pdEJ0biIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl9kaXNhYmxlQnRuIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnRuIiwiX3RvZ2dsZUJ0blN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIkNhcmQiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9jYXJkRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2VFbCIsIl9jYXJkTGlrZUJ0biIsIl9jYXJkVHJhc2hCdG4iLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VJY29uIiwidG9nZ2xlIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbGlja0Nsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEltYWdlIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsInByb2ZpbGVOYW1lIiwic2V0VXNlckluZm8iLCJqb2IiLCJlZGl0UHJvZmlsZU1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2VsZW1lbnQiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmQiLCJhZGRDYXJkIiwiX3JlZjIiLCJuZXdDYXJkIiwiX3JlZjMiLCJjYXJkUHJldmlld1BvcHVwIiwiX2NhcmRJbWFnZU1vZGFsUHJldmlldyIsIl9jYXJkSW1hZ2VNb2RhbFRpdGxlIiwiYWRkQ2FyZFBvcHVwIiwiX3JlZjQiLCJ1cmwiLCJhZGRDYXJkRGF0YSIsImFkZENhcmRWYWxpZGF0b3IiLCJlZGl0Q2FyZFZhbGlkYXRvciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=